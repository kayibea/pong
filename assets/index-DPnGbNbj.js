var m=Object.defineProperty;var S=(i,t,s)=>t in i?m(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var h=(i,t,s)=>S(i,typeof t!="symbol"?t+"":t,s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const y of c)if(y.type==="childList")for(const _ of y.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&l(_)}).observe(document,{childList:!0,subtree:!0});function s(c){const y={};return c.integrity&&(y.integrity=c.integrity),c.referrerPolicy&&(y.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?y.credentials="include":c.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function l(c){if(c.ep)return;c.ep=!0;const y=s(c);fetch(c.href,y)}})();const L=class L{constructor(t=0,s=0){h(this,"_x");h(this,"_y");this._x=t,this._y=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=t}set y(t){this._y=t}setXY(t,s){this._x=t,this._y=s}};h(L,"zero",new L(0,0));let p=L;class v{constructor(t,s=p.zero,l=p.zero){h(this,"_size");h(this,"_position");h(this,"_velocity");this._size=t,this._position=s,this._velocity=l}get size(){return this._size}get width(){return this.size.at(0)||0}get height(){return this.size.at(1)||0}get position(){return this._position}get velocity(){return this._velocity}set position(t){this.position.x=t.x,this.position.y=t.y}set velocity(t){this._velocity.x=t.x,this._velocity.y=t.y}}const d=class d extends v{constructor(t,s=p.zero,l=new p(d.BALL_SPEED_X,d.BALL_SPEED_Y)){super(t,s,l)}};h(d,"BALL_WIDTH",15),h(d,"BALL_HEIGHT",15),h(d,"BALL_SPEED_X",5),h(d,"BALL_SPEED_Y",3);let g=d;const w=class w extends v{constructor(t,s=new p(0,0),l=new p(w.PADDLE_SPEED_X,w.PADDLE_SPEED_Y)){super(t,s,l)}};h(w,"PADDLE_WIDTH",30),h(w,"PADDLE_HEIGHT",100),h(w,"PADDLE_SPEED_X",0),h(w,"PADDLE_SPEED_Y",5);let a=w;const T=(i,t,s,l=1)=>`rgba(${i},${t},${s},${l})`,D={ArrowUp:38,ArrowDown:40,W:87,S:83,Enter:13,Space:32},n=document.getElementById("board");console.log(`canvas width: ${n.width}`);console.log(`canvas height: ${n.height}`);const x=n.width/2,A=n.height/2,f={up:!1,down:!1,w:!1,s:!1,arrowUp:!1,arrowDown:!1},E={player1:0,player2:0},o=n.getContext("2d"),e=new g([g.BALL_WIDTH,g.BALL_HEIGHT],new p(x,A)),u=new a([a.PADDLE_WIDTH,a.PADDLE_HEIGHT],new p(a.PADDLE_WIDTH,A-a.PADDLE_HEIGHT/2)),r=new a([a.PADDLE_WIDTH,a.PADDLE_HEIGHT],new p(n.width-a.PADDLE_WIDTH*2,A-a.PADDLE_HEIGHT/2));if(!o)throw new Error("Could not create 2d context!");H();function H(){o.clearRect(0,0,n.width,n.height),z(),b(),k(),I(),W(),C(),requestAnimationFrame(H)}function I(){for(const i of[u,r])o.fillStyle="white",o.fillRect(i.position.x,i.position.y,i.width,i.height),o.lineWidth=1,o.strokeStyle="gray",o.strokeRect(i.position.x,i.position.y,i.width,i.height)}function k(){o.strokeStyle=T(255,255,255,.5),o.lineWidth=2,o.setLineDash([10,10]),o.beginPath(),o.moveTo(x,-1),o.lineTo(x,n.height),o.stroke(),o.setLineDash([])}function W(){o.beginPath(),o.fillRect(e.position.x,e.position.y,g.BALL_WIDTH,g.BALL_HEIGHT),o.fillStyle="white",o.fill(),o.stroke()}function P(){e.position.setXY(n.width/2,n.height/2),e.velocity.x*=-1,e.velocity.y=Math.random()>.5?4:-4}function b(){e.position.x+=e.velocity.x,e.position.y+=e.velocity.y;for(const i of[u,r])B(e,i)&&(e.velocity.x*=-1,e.position.x<i.position.x?e.position.x-=e.width:e.position.x>i.position.x&&(e.position.x+=+i.width));(e.position.y-e.height/2<0||e.position.y+e.height/2>n.height)&&(e.velocity.y*=-1),e.position.x-e.width/2<0?(E.player2+=1,P()):e.position.x+e.width/2>n.width&&(E.player1+=1,P())}function C(){o.font="50px Zen Dots",o.fillText(E.player1.toString(),n.width/4,50),o.fillText(E.player2.toString(),n.width*3/4,50)}function z(){f.w&&u.position.y>0&&(u.position.y-=u.velocity.y),f.s&&u.position.y+u.height<n.height&&(u.position.y+=u.velocity.y);{const i=(Math.random()-.5)*150;e.position.y+i<r.position.y+r.height/2?r.position.y-=r.velocity.y:e.position.y+i>r.position.y+r.height/2&&(r.position.y+=r.velocity.y),r.position.y<0&&(r.position.y=0),r.position.y+r.height>n.height&&(r.position.y=n.height-r.height)}}function B(i,t){return i.position.x<t.position.x+t.width&&i.position.x+i.height>t.position.x&&i.position.y<t.position.y+t.height&&i.position.y+i.height>t.position.y}document.addEventListener("keydown",i=>{switch(i.keyCode){case D.ArrowUp:f.arrowUp=!0;break;case D.ArrowDown:f.arrowDown=!0;break;case D.W:f.w=!0;break;case D.S:f.s=!0;break}});document.addEventListener("keyup",i=>{switch(i.keyCode){case D.ArrowUp:f.arrowUp=!1;break;case D.ArrowDown:f.arrowDown=!1;break;case D.W:f.w=!1;break;case D.S:f.s=!1;break}});
